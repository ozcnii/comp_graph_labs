<!DOCTYPE html>
<html>
  <head>
    <title>Алгоритм Брезенхема для рисования прямой</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        max-width: 800px;
        margin: 0 auto;
      }
      .input-group {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      canvas {
        border: 1px solid #000;
      }
      button {
        padding: 8px 16px;
        cursor: pointer;
      }
      .algorithm-steps {
        background-color: #f5f5f5;
        padding: 15px;
        border-radius: 5px;
        font-family: monospace;
        white-space: pre;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Алгоритм Брезенхема для рисования прямой</h1>

      <div class="input-group">
        <label>(x1, y1):</label>
        <input type="number" id="x0" placeholder="x1" value="50" />
        <input type="number" id="y0" placeholder="y1" value="50" />
      </div>

      <div class="input-group">
        <label>(x2, y2):</label>
        <input type="number" id="x1" placeholder="x2" value="200" />
        <input type="number" id="y1" placeholder="y2" value="150" />
      </div>

      <button id="drawBtn">Нарисовать прямую</button>

      <canvas id="canvas" width="600" height="400"></canvas>
    </div>

    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      const x0Input = document.getElementById("x0");
      const y0Input = document.getElementById("y0");
      const x1Input = document.getElementById("x1");
      const y1Input = document.getElementById("y1");
      const drawBtn = document.getElementById("drawBtn");

      function drawPixel(x, y) {
        ctx.fillRect(x, y, 1, 1);
      }

      function drawLineBresenham(x0, y0, x1, y1) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = "black";

        let x = x0;
        let y = y0;
        let dx = x1 - x0;
        let dy = y1 - y0;
        let m = dy / dx;
        let e = m - 1 / 2;
        let i = 0;

        drawPixel(x, y);
        while (i < dx) {
          if (e >= 0) {
            y = y + 1;
            e = e + m - 1;
          } else {
            e = e + m;
          }
          x = x + 1;
          drawPixel(x, y);
          i = i + 1;
        }
      }

      drawBtn.addEventListener("click", () => {
        const x0 = parseInt(x0Input.value);
        const y0 = parseInt(y0Input.value);
        const x1 = parseInt(x1Input.value);
        const y1 = parseInt(y1Input.value);

        drawLineBresenham(x0, y0, x1, y1);
      });

      window.addEventListener("load", () => {
        drawLineBresenham(
          parseInt(x0Input.value),
          parseInt(y0Input.value),
          parseInt(x1Input.value),
          parseInt(y1Input.value)
        );
      });
    </script>
  </body>
</html>
